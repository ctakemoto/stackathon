(function(t){function e(e){for(var r,s,i=e[0],l=e[1],c=e[2],d=0,p=[];d<i.length;d++)s=i[d],o[s]&&p.push(o[s][0]),o[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,i=1;i<a.length;i++){var l=a[i];0!==o[l]&&(r=!1)}r&&(n.splice(e--,1),t=s(s.s=a[0]))}return t}var r={},o={app:0},n=[];function s(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=r,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(a,r,function(e){return t[e]}.bind(null,r));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;n.push(["9be5","chunk-vendors"]),a()})({"03fa":function(t,e,a){"use strict";var r=a("574f"),o=a.n(r);o.a},"09f4":function(t,e,a){},"14ca":function(t,e,a){"use strict";var r=a("3503"),o=a.n(r);o.a},"1da0":function(t,e,a){},"26d7":function(t,e,a){"use strict";var r=a("3a14"),o=a.n(r);o.a},"2cdc":function(t,e,a){"use strict";var r=a("d04a"),o=a.n(r);o.a},"2f4a":function(t,e,a){"use strict";var r=a("8599"),o=a.n(r);o.a},3503:function(t,e,a){},"3a14":function(t,e,a){},"3ec1":function(t,e,a){"use strict";var r=a("4c59"),o=a.n(r);o.a},"47d8":function(t,e,a){"use strict";var r=a("a8c6"),o=a.n(r);o.a},"4c59":function(t,e,a){},"51d9":function(t,e,a){"use strict";var r=a("aa01"),o=a.n(r);o.a},"574f":function(t,e,a){},"6a0c":function(t,e,a){"use strict";var r=a("9d65"),o=a.n(r);o.a},"6a55":function(t,e,a){t.exports=a.p+"media/NYC_OutOfFocusCarLightsLOOP_1664x936.8d679089.mp4"},"6bb4":function(t,e,a){"use strict";var r=a("09f4"),o=a.n(r);o.a},8599:function(t,e,a){},"8eb4":function(t,e,a){"use strict";var r=a("b84f"),o=a.n(r);o.a},"9a86":function(t,e,a){t.exports=a.p+"img/mobile-banner.06f1feb5.png"},"9be5":function(t,e,a){"use strict";a.r(e);var r,o=a("8f09"),n=a("7b5d"),s=(a("1960"),a("93a8"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("NavBar"),a("router-view")],1)}),i=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-navbar",{staticClass:"navbar",attrs:{toggleable:"sm",type:"dark",fixed:"top"}},[a("b-navbar-brand",{attrs:{to:"/"}},[t._v("Toilt")]),a("b-navbar-toggle",{attrs:{target:"nav-collapse2"}}),a("b-collapse",{attrs:{id:"nav-collapse2","is-nav":""}},[a("b-navbar-nav",[a("b-nav-item",{attrs:{to:"/map"}},[t._v("Map")]),a("b-nav-item",{attrs:{to:"/bathrooms"}},[t._v("Explore")]),a("b-nav-item",{attrs:{to:"/add"}},[t._v("Contribute")])],1),a("b-navbar-nav",{staticClass:"ml-auto"},[t.$store.state.isLoggedIn?t._e():a("b-nav-item",{attrs:{to:"/register"}},[t._v("Sign Up")]),t.$store.state.isLoggedIn?t._e():a("b-nav-item",{attrs:{to:"/login"}},[t._v("Login")]),t.$store.state.isLoggedIn?a("b-nav-item",{attrs:{to:"/profile"}},[t._v(t._s(t.userGreeting))]):t._e(),t.$store.state.isLoggedIn?a("b-nav-item",{on:{click:t.logout}},[t._v("Logout")]):t._e()],1)],1)],1)},c=[],u=(a("2fac"),a("3b8d")),d=(a("5532"),a("49e9")),p=a.n(d),m=function(){return p.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_BASE_URL})},h={register:function(t){return m().post("auth/signup",t)},login:function(t){return m().post("auth/login",t)},logout:function(){return m().post("auth/logout")}},f={name:"navbar",computed:{userGreeting:function(){return"Welcome, ".concat(this.$store.state.user.name||this.$store.state.user.username)}},methods:{logout:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.logout();case 3:a=t.sent,a.data,a.status,e={variant:"success",title:"Success",message:"Logout successful"},this.$store.dispatch("logout"),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error(t.t0),e={variant:"danger",title:"Warning",message:t.t0.response.data};case 14:this.$bvToast.toast(e.message,e),this.$router.push("/");case 16:case"end":return t.stop()}},t,this,[[0,10]])}));function e(){return t.apply(this,arguments)}return e}()}},b=f,g=(a("3ec1"),a("2877")),v=Object(g["a"])(b,l,c,!1,null,"551c8f5f",null),_=v.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-navbar",{attrs:{id:"footer-bottom",fixed:"bottom",align:"center"}},[a("b-nav-text",{staticClass:"credit"},[t._v("\n    Icons made by\n    "),a("a",{attrs:{href:"https://www.flaticon.com/authors/simpleicon",title:"SimpleIcon"}},[t._v("SimpleIcon")]),t._v(" from\n    "),a("a",{attrs:{href:"https://www.flaticon.com/",title:"Flaticon"}},[t._v("www.flaticon.com")]),t._v(" is licensed by\n    "),a("a",{attrs:{href:"http://creativecommons.org/licenses/by/3.0/",title:"Creative Commons BY 3.0",target:"_blank"}},[t._v("CC 3.0 BY")])])],1)},w=[],C={name:"footer-bottom"},k=C,y=(a("2cdc"),Object(g["a"])(k,x,w,!1,null,"f45e7800",null)),L=y.exports,E={name:"app",components:{NavBar:_,Footer:L}},O=E,$=(a("2f4a"),Object(g["a"])(O,s,i,!1,null,null,null)),j=$.exports,A=a("b010"),B=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("b-jumbotron",{attrs:{fluid:""}},[r("mq-layout",{attrs:{mq:"mobile"}},[r("img",{staticClass:"pic-background",attrs:{src:a("9a86"),alt:""}})]),r("mq-layout",{attrs:{mq:"tablet+"}},[r("video",{staticClass:"video-background",attrs:{src:a("6a55"),preload:"",autoplay:"",loop:"",muted:""},domProps:{muted:!0}})]),r("template",{slot:"header"},[t._v("Welcome to Toilt")]),r("template",{slot:"lead"},[t._v("Find where to go when on the go.")])],2)],1)},P=[],R={name:"home",data:function(){return{posErr:!1,posIsReady:!1,address:""}},methods:{},mounted:function(){}},S=R,F=(a("cc3f"),Object(g["a"])(S,B,P,!1,null,"5ce6f5ba",null)),I=F.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"register"},[a("h1",[t._v("Register")]),a("b-form",{on:{submit:t.register}},[a("b-form-group",{attrs:{id:"input-group-1",label:"Email Address:","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",type:"email",name:"email",placeholder:"email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("b-form-group",{attrs:{id:"input-group-2",label:"Username:","label-for":"input-2"}},[a("b-form-input",{attrs:{id:"input-2",type:"text",name:"username",placeholder:"username",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),a("b-form-group",{attrs:{id:"input-group-3",label:"Name:","label-for":"input-3"}},[a("b-form-input",{attrs:{id:"input-3",type:"text",name:"name",placeholder:"name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("b-form-group",{attrs:{id:"input-group-4",label:"Password:","label-for":"input-4"}},[a("b-form-input",{attrs:{id:"input-4",type:"password",name:"password",placeholder:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("b-button",{attrs:{type:"submit"}},[t._v("Register")])],1)],1)},q=[],U={name:"register",data:function(){return{email:"",password:"",username:"",name:""}},methods:{register:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,t.next=4,h.register({email:this.email,password:this.password,username:this.username,name:this.name});case 4:a={variant:"success",title:"Success",message:"Registration successful"},this.$router.push({path:"/login"}),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),console.dir(t.t0),a={variant:"danger",title:"Warning",message:t.t0.response.data};case 12:this.$bvToast.toast(a.message,a),this.$router.push({path:"/login"});case 14:case"end":return t.stop()}},t,this,[[1,8]])}));function e(e){return t.apply(this,arguments)}return e}()}},M=U,T=(a("03fa"),Object(g["a"])(M,N,q,!1,null,"a249d594",null)),V=T.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("h1",[t._v("Login")]),a("b-form",[a("b-form-group",{attrs:{id:"input-group-1",label:"Email Address:","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",type:"email",name:"email",placeholder:"email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("b-form-group",{attrs:{id:"input-group-2",label:"Password:","label-for":"input-2"}},[a("b-form-input",{attrs:{id:"input-2",type:"password",name:"password",placeholder:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("b-button",{on:{click:function(e){return e.preventDefault(),t.login(e)}}},[t._v("Login")])],1)],1)},D=[],G={name:"login",data:function(){return{email:"",password:""}},methods:{login:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,t.next=4,h.login({email:this.email,password:this.password});case 4:a=t.sent,this.$store.dispatch("setUser",a.data),this.$router.push("/"),t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](1),console.error(t.t0),r={variant:"danger",title:"Error logging in",message:t.t0.response.data},this.$bvToast.toast(r.message,r);case 14:case"end":return t.stop()}},t,this,[[1,9]])}));function e(e){return t.apply(this,arguments)}return e}()}},H=G,z=(a("26d7"),Object(g["a"])(H,Y,D,!1,null,"31008e2a",null)),W=z.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"allBathrooms"},[t.isLoading?a("Loading"):a("div",{staticClass:"overflow-auto"},[a("h1",[t._v("Explore "+t._s(t.numBathrooms)+" Bathrooms")]),a("div",{attrs:{id:"bathroom-container"}},t._l(t.bathrooms,function(t){return a("SingleBathroom",{key:t.id,staticClass:"single-bathroom",attrs:{bathroom:t}})}),1),a("b-pagination",{attrs:{"total-rows":t.numBathrooms,"per-page":t.perPage,"aria-controls":"single-bathroom",align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)},K=[],X={getPlaces:function(){return m().get("api/places")},getPlace:function(t){return m().get("api/places/".concat(t))},addPlace:function(t){return m().post("api/places",t)},getCoordsFromAddress:function(t){return m().post("/api/places/geocode",{address:t})},getAddressFromCoords:function(t,e){return m().post("api/places/reverse-geocode",{lat:t,long:e})},addComment:function(t){return m().post("api/comments/".concat(t.placeId),t)}},Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"bathroom"},[a("b-card",{staticClass:"text-center mb-2 single-bathroom",attrs:{title:t.bathroom.name,tag:"article"}},[a("b-card-text",[t._v(t._s(t.bathroom.address))]),a("b-button",{attrs:{to:{name:"bathroom-detail",params:{id:t.bathroom.id}}}},[t._v("More Info")])],1)],1)},Q=[],tt={name:"bathroom",props:["bathroom"]},et=tt,at=(a("14ca"),Object(g["a"])(et,Z,Q,!1,null,"3a90dca9",null)),rt=at.exports,ot=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loading"},[a("div",{staticClass:"text-center"},[a("section",{attrs:{id:"shapes"}},[a("div",{staticClass:"loading-container"},[a("div",{staticClass:"loading-shape square"}),a("div",{staticClass:"loading-shape heart"}),a("div",{staticClass:"loading-shape triangle"}),a("div",{staticClass:"loading-shape circle"})]),a("div",{staticClass:"loading-text"})])])])}],st={name:"loading"},it=st,lt=(a("6bb4"),Object(g["a"])(it,ot,nt,!1,null,"433f0ebf",null)),ct=lt.exports,ut={name:"allBathrooms",methods:{getBathrooms:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X.getPlaces();case 3:e=t.sent,a=e.data,this.$store.dispatch("setAllBathrooms",a),this.isLoading=!1,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),console.error(t.t0),this.$bvToast.toast("Error retrieving data",{variant:"danger",title:"Oh no!"});case 13:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}()},data:function(){return{isLoading:!0,currentPage:1,perPage:6}},computed:{bathrooms:function(){var t=this.$store.state.allBathrooms;return t.slice((this.currentPage-1)*this.perPage,this.currentPage*this.perPage)},numBathrooms:function(){return this.$store.state.allBathrooms.length}},components:{SingleBathroom:rt,Loading:ct},mounted:function(){this.getBathrooms()}},dt=ut,pt=(a("8eb4"),Object(g["a"])(dt,J,K,!1,null,"3aad18fc",null)),mt=pt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"user-map"},[a("h1",[t._v("Find Bathrooms Near You")]),a("b-input-group",[a("b-form-input",{attrs:{placeholder:"Enter an address",trim:""},on:{submit:t.setLocation},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setLocation(e)}},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}}),a("b-input-group-append",[a("b-button",{attrs:{variant:"outline-success"},on:{click:t.setLocation}},[t._v("GO")])],1)],1),!this.posErr&&this.posIsReady?a("MapView",{attrs:{mapCoords:this.$store.state.coords,includeArea:!0,mapHeight:"400px"}}):t._e(),this.posErr||this.posIsReady?t._e():a("Loading"),a("b-alert",{attrs:{show:t.posErr,variant:"danger",dismissible:""}},[t._v("Unable to get location, please enter address.")])],1)},ft=[],bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mapid"},[this.mapErr?t._e():a("div",{style:t.style,attrs:{id:"map-view"}},[t.isLoading?a("Loading"):t._e()],1),a("b-alert",{attrs:{show:t.mapErr,variant:"danger",dismissible:""}},[t._v("Error in displaying map!")])],1)},gt=[],vt=(a("4d12"),a("71a2")),_t=a.n(vt),xt={name:"mapid",data:function(){return{map:null,zoom:18,tileLayer:null,mapErr:!1,marker:null,area:null,isLoading:!0}},watch:{mapCoords:function(t){this.mapErr=!1;try{this.map.flyTo(t,this.zoom),this.addMarker(t)}catch(e){console.error(e),this.mapErr=!0}}},components:{Loading:ct},props:{mapCoords:{type:Array,required:!0},includeArea:{type:Boolean,default:!1},areaRadius:{type:Number,default:50},mapHeight:{type:String,default:"300px"},additionalCallback:{type:Function}},computed:{style:function(){return"height: ".concat(this.mapHeight,"; width: 100%")}},methods:{initMap:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;try{this.map=_t.a.map("map-view").setView(this.mapCoords,this.zoom),console.log("process.env",Object({NODE_ENV:"production",BASE_URL:"/"})),this.tileLayer=_t.a.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{maxZoom:t,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets",accessToken:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_MAPBOX_ACCESS_TOKEN}).addTo(this.map),this.addMarker(this.mapCoords),this.map.on("click",this.onMapClick),this.mapErr=!1,this.isLoading=!1}catch(e){console.error(e),this.mapErr=!0,this.isLoading=!1}},addMarker:function(t){this.marker&&this.map.removeLayer(this.marker),this.area&&this.map.removeLayer(this.area),this.marker=_t.a.circle(t,{color:"#222",fillColor:"#222",fillOpacity:1,radius:1}).addTo(this.map),this.includeArea&&(this.area=_t.a.circle(t,{color:"#222",fillColor:"#222",fillOpacity:.3,radius:this.areaRadius}).addTo(this.map))},onMapClick:function(t){this.$store.dispatch("setSelectedLocation",[t.latlng.lat,t.latlng.lng]),this.additionalCallback&&this.additionalCallback(t.latlng.lat,t.latlng.lng)},createIcon:function(){return _t.a.icon({iconUrl:"../assets/map-marker.png",shadowUrl:"../assets/map-marker-shadow.png",iconSize:[38,64],shadowSize:[46,27],iconAnchor:[22,64],shadowAnchor:[4,25],popupAnchor:[-3,-76]})}},mounted:function(){this.initMap()}},wt=xt,Ct=Object(g["a"])(wt,bt,gt,!1,null,"59f1d5f5",null),kt=Ct.exports,yt={name:"user-map",components:{MapView:kt,Loading:ct},data:function(){return{posErr:!1,posIsReady:!1,address:""}},methods:{getUserLocation:function(){var t=this,e={enableHighAccuracy:!0,timeout:8e3,maximumAge:0};navigator.geolocation.getCurrentPosition(function(e){t.$store.dispatch("setCurrentLocation",[e.coords.latitude,e.coords.longitude]),t.posErr=!1,t.posIsReady=!0},function(e){console.error(e),t.posErr=!0},e)},setLocation:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,X.getCoordsFromAddress(this.address);case 3:a=t.sent,r=a.data,this.$store.dispatch("setCurrentLocation",r.coords);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},mounted:function(){this.getUserLocation()}},Lt=yt,Et=Object(g["a"])(Lt,ht,ft,!1,null,"84cf28ca",null),Ot=Et.exports,$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"bathroom-detail"},[t.isLoading&&!t.mapErr?a("Loading"):t._e(),t.isLoading?t._e():a("div",[a("h1",[t._v(t._s(this.bathroom.name))]),t.isLoading||t.mapErr?t._e():a("MapView",{attrs:{mapCoords:this.bathroom.coordinates,mapHeight:"400px"}}),a("h3",[t._v("Information")]),a("b-container",{staticClass:"place-info"},[a("div",{staticClass:"info-right"},[a("div",[a("h4",[t._v("Description")]),a("p",[t._v(t._s(this.bathroom.desciption?this.bathroom.desciption:"None"))])]),a("div",[a("h4",[t._v("Address")]),a("p",[t._v(t._s(this.bathroom.address?this.bathroom.address:"None"))])])]),a("dl",{staticClass:"info-left"},[a("dt",[t._v("Single Stall:")]),a("dd",[t._v(t._s(this.bathroom.singleStall))]),a("dt",[t._v("Handicap Accessible:")]),a("dd",[t._v(t._s(this.bathroom.handicapAccessible))]),a("dt",[t._v("Open Year Round:")]),a("dd",[t._v(t._s(this.bathroom.openYearRoundl))]),a("dt",[t._v("Autoflush:")]),a("dd",[t._v(t._s(this.bathroom.autoFlush))]),a("dt",[t._v("Gender Neutral:")]),a("dd",[t._v(t._s(this.bathroom.genderNeutral))]),a("dt",[t._v("Ledge in Stall:")]),a("dd",[t._v(t._s(this.bathroom.hasLedge))]),a("dt",[t._v("Free to use:")]),a("dd",[t._v(t._s(this.bathroom.isFree))]),a("dt",[t._v("Cleanliness Level:")]),a("dd",[t._v(t._s(this.bathroom.cleanliness))])])]),a("b-container",[a("h3",[t._v("Comments")]),t._l(this.bathroom.comments,function(e){return a("b-card",{key:e.id,staticClass:"comment-card text-left",attrs:{header:"Posted by "+(e.userId?e.user.username:"Guest"),title:e.title,"sub-title":"Posted on "+e.createdAt.slice(0,10)}},[t._v(t._s(e.body))])})],2),a("AddComment",{attrs:{bathroomId:t.bathroom.id}})],1)],1)},jt=[],At=a("bd86"),Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"add-comment"},[t.showCommentForm?a("div",[a("h3",[t._v("Add a Comment")]),a("b-form",[a("b-form-group",{attrs:{id:"input-group-1",label:"Subject:","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",type:"text",name:"subject",placeholder:"subject",required:""},model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}})],1),a("b-form-group",{attrs:{id:"input-group-2",label:"Comment:","label-for":"input-2"}},[a("b-form-textarea",{attrs:{id:"input-2",type:"text",name:"text",placeholder:"What do you think about this location?",rows:"3","max-rows":"6",required:""},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),a("b-button",{on:{click:function(e){return e.preventDefault(),t.addComment(e)}}},[t._v("Submit")])],1)],1):a("b-button",{on:{click:function(e){t.showCommentForm=!t.showCommentForm}}},[t._v("Add a Comment")])],1)},Pt=[],Rt={name:"add-comment",data:function(){return{subject:"",text:"",showCommentForm:!1}},watch:{showCommentForm:function(t){console.log("showCommentForm",t)}},props:{bathroomId:{type:Number,required:!0}},methods:{addComment:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X.addComment({title:this.subject,body:this.text,userId:this.$store.state.user.id,placeId:this.bathroomId});case 3:e=t.sent,a=e.data,this.$store.dispatch("addComment",a),this.showCommentForm=!1,this.subject="",this.text="",t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](0),console.error(t.t0),r={variant:"danger",title:"Error posting comment",message:t.t0.response.data},this.$bvToast.toast(r.message,r);case 16:case"end":return t.stop()}},t,this,[[0,11]])}));function e(){return t.apply(this,arguments)}return e}()}},St=Rt,Ft=(a("51d9"),Object(g["a"])(St,Bt,Pt,!1,null,"7046c503",null)),It=Ft.exports,Nt=(r={name:"bathroom-detail",methods:{},data:function(){return{isLoading:!0,mapErr:!1}},computed:{bathroom:function(){return this.$store.state.selectedBathroom}}},Object(At["a"])(r,"methods",{format:function(t,e){dateFormat(t,e)},getPlace:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a,r,o,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X.getPlace(this.$route.params.id);case 3:if(e=t.sent,a=e.data,r=a,r.address||!r.latitude||!r.longitude){t.next=11;break}return t.next=9,X.getAddressFromCoords(r.latitude,r.longitude);case 9:o=t.sent,r.address=o.data.address;case 11:if(r.latitude&&r.longitude||!r.address){t.next=17;break}return t.next=14,X.getCoordsFromAddress(r.address);case 14:n=t.sent,r.coordinates=n.data.coords,console.log("bathroom.comments",r.comments);case 17:this.$store.dispatch("setBathroom",r),t.next=25;break;case 20:t.prev=20,t.t0=t["catch"](0),console.error(t.t0),this.$bvToast.toast(t.t0.response.data,{variant:"danger",title:"Error finding Coordinates"}),this.mapErr=!0;case 25:this.isLoading=!1;case 26:case"end":return t.stop()}},t,this,[[0,20]])}));function e(){return t.apply(this,arguments)}return e}()}),Object(At["a"])(r,"components",{Loading:ct,MapView:kt,AddComment:It}),Object(At["a"])(r,"mounted",function(){this.getPlace()}),r),qt=Nt,Ut=(a("6a0c"),Object(g["a"])(qt,$t,jt,!1,null,"1496a6df",null)),Mt=Ut.exports,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addBathroom"},[a("h1",[t._v("Add a Place")]),a("b-form",{attrs:{autocomplete:"off"}},[a("b-form-group",{attrs:{id:"input-group-1",label:"Name:","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",type:"text",name:"name",required:""},model:{value:t.fields.name,callback:function(e){t.$set(t.fields,"name",e)},expression:"fields.name"}})],1),a("b-form-group",{attrs:{id:"input-group-3",label:"Address:","label-for":"input-3"}},[a("b-form-input",{attrs:{id:"input-3",type:"text",name:"address",required:""},on:{focus:function(e){t.showCollapse=!0}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setLocation(e)}},model:{value:t.fields.address,callback:function(e){t.$set(t.fields,"address",e)},expression:"fields.address"}}),a("b-collapse",{attrs:{id:"collapse-map"},on:{click:t.setAddress},model:{value:t.showCollapse,callback:function(e){t.showCollapse=e},expression:"showCollapse"}},[a("b-alert",{attrs:{show:"",variant:"info"}},[t._v("You can click on the map to pick the address")]),a("MapView",{attrs:{mapCoords:t.mapCoords,additionalCallback:t.setAddress}})],1)],1),a("b-form-group",{attrs:{id:"input-group-2",label:"Description:","label-for":"input-2"}},[a("b-form-input",{attrs:{id:"input-2",type:"text",name:"description",required:""},on:{focus:function(e){t.showCollapse=!1}},model:{value:t.fields.description,callback:function(e){t.$set(t.fields,"description",e)},expression:"fields.description"}})],1),a("b-form-group",{attrs:{id:"input-group-4",label:"Is it a single stall?","label-for":"input-4"}},[a("b-form-select",{attrs:{id:"input-4",name:"singleStall",options:t.options,required:""},model:{value:t.fields.singleStall,callback:function(e){t.$set(t.fields,"singleStall",e)},expression:"fields.singleStall"}})],1),a("b-form-group",{attrs:{id:"input-group-5",label:"Is it a handicap accessible?","label-for":"input-5"}},[a("b-form-select",{attrs:{id:"input-5",name:"handicapAccessible",options:t.options,required:""},model:{value:t.fields.handicapAccessible,callback:function(e){t.$set(t.fields,"handicapAccessible",e)},expression:"fields.handicapAccessible"}})],1),a("b-form-group",{attrs:{id:"input-group-6",label:"Is it open all year round?","label-for":"input-6"}},[a("b-form-select",{attrs:{id:"input-6",name:"openYearRound",options:t.options,required:""},model:{value:t.fields.openYearRound,callback:function(e){t.$set(t.fields,"openYearRound",e)},expression:"fields.openYearRound"}})],1),a("b-form-group",{attrs:{id:"input-group-7",label:"Do all (or most) toilets auto-flush?","label-for":"input-7"}},[a("b-form-select",{attrs:{id:"input-7",name:"autoFlush",options:t.options,required:""},model:{value:t.fields.autoFlush,callback:function(e){t.$set(t.fields,"autoFlush",e)},expression:"fields.autoFlush"}})],1),a("b-form-group",{attrs:{id:"input-group-8",label:"Is it gender neutral?","label-for":"input-8"}},[a("b-form-select",{attrs:{id:"input-8",name:"genderNeutral",options:t.options,required:""},model:{value:t.fields.genderNeutral,callback:function(e){t.$set(t.fields,"genderNeutral",e)},expression:"fields.genderNeutral"}})],1),a("b-form-group",{attrs:{id:"input-group-9",label:"Is there a ledge in the stall?","label-for":"input-9"}},[a("b-form-select",{attrs:{id:"input-9",name:"hasLedge",options:t.options,required:""},model:{value:t.fields.hasLedge,callback:function(e){t.$set(t.fields,"hasLedge",e)},expression:"fields.hasLedge"}})],1),a("b-form-group",{attrs:{id:"input-group-10",label:"Is it free to use?","label-for":"input-10"}},[a("b-form-select",{attrs:{id:"input-10",name:"isFree",options:t.options,required:""},model:{value:t.fields.isFree,callback:function(e){t.$set(t.fields,"isFree",e)},expression:"fields.isFree"}})],1),a("b-form-group",{attrs:{id:"input-group-11",label:"How clean is it?","label-for":"input-11"}},[a("b-form-select",{attrs:{id:"input-11",name:"cleanliness",options:t.options2,required:""},model:{value:t.fields.cleanliness,callback:function(e){t.$set(t.fields,"cleanliness",e)},expression:"fields.cleanliness"}})],1),a("b-button",{on:{click:function(e){return e.preventDefault(),t.addPlace(e)}}},[t._v("Submit")])],1)],1)},Vt=[],Yt={name:"addBathroom",data:function(){return{fields:{name:"",description:"",address:"",latitude:null,longitude:null,singleStall:"",hasLedge:"",isFree:"",cleanliness:"",borough:"",handicapAccessible:"",openYearRound:"",genderNeutral:""},options:[{value:null,text:"Please select an option"},{value:"Yes",text:"Yes"},{value:"No",text:"No"},{value:"Unknown",text:"Unknown"}],options2:[{value:null,text:"Please select an option"},{value:"Great",text:"Great"},{value:"Good",text:"Good"},{value:"Okay",text:"Okay"},{value:"Poor",text:"Poor"},{value:"Unknown",text:"Unknown"}],showCollapse:!1,mapCoords:this.$store.state.coords}},components:{MapView:kt},methods:{addPlace:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X.addPlace(this.fields);case 3:e=t.sent,a=e.data,this.$store.dispatch("addBathroom",a),this.$router.push("/bathrooms/".concat(a.id)),t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](0),console.error(t.t0),r={variant:"danger",title:"Warning",message:t.t0.response.data},this.$bvToast.toast(r.message,r);case 14:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),setAddress:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e,a){var r,o,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X.getAddressFromCoords(e,a);case 3:r=t.sent,o=r.data,this.fields.address=o.address,this.fields.latitude=e,this.fields.longitude=a,t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error(t.t0),n={variant:"danger",title:"Error getting address",message:t.t0.response.data},this.$bvToast.toast(n.message,n);case 15:case"end":return t.stop()}},t,this,[[0,10]])}));function e(e,a){return t.apply(this,arguments)}return e}(),setLocation:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,X.getCoordsFromAddress(this.fields.address);case 3:a=t.sent,r=a.data,this.mapCoords=r.coords;case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}},Dt=Yt,Gt=(a("b092"),Object(g["a"])(Dt,Tt,Vt,!1,null,"558281bd",null)),Ht=Gt.exports,zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"profile"},[a("h1",[t._v("Profile")]),a("div",{staticClass:"profile-info"},[a("dl",[a("dt",[t._v("Name:")]),a("dd",[t._v(t._s(t.user.name))]),a("dt",[t._v("Username:")]),a("dd",[t._v(t._s(t.user.username))]),a("dt",[t._v("Email:")]),a("dd",[t._v(t._s(t.user.email))]),a("dt",[t._v("Test")]),a("dd",[t._v(t._s(t.test))])])])])},Wt=[],Jt={name:"profile",computed:{user:function(){return this.$store.state.user},test:function(){return Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_TEST_VAR}}},Kt=Jt,Xt=(a("47d8"),Object(g["a"])(Kt,zt,Wt,!1,null,"07ed89ca",null)),Zt=Xt.exports;o["default"].use(A["a"]);var Qt=new A["a"]({routes:[{path:"/",name:"Home",component:I},{path:"/register",name:"register",component:V},{path:"/login",name:"login",component:W},{path:"/bathrooms",name:"bathrooms",component:mt},{path:"/bathrooms/:id",name:"bathroom-detail",component:Mt},{path:"/loading",name:"loading",component:ct},{path:"/map",name:"map",component:Ot},{path:"/add",name:"add-place",component:Ht},{path:"/profile",name:"profile",component:Zt}]}),te=a("dc5f"),ee=a("75fc"),ae=a("e99f");o["default"].use(ae["a"]);var re=new ae["a"].Store({strict:!0,state:{user:{},isLoggedIn:!1,allBathrooms:[],selectedBathroom:{},coords:[40.705450817990055,-74.00917347517144],selectedLocation:[]},mutations:{setUser:function(t,e){t.user=e,t.isLoggedIn=!0},logout:function(t){t.user=null,t.isLoggedIn=!1},setAllBathrooms:function(t,e){t.allBathrooms=e},setBathroom:function(t,e){t.selectedBathroom=e},setCurrentLocation:function(t,e){t.coords=e},addBathroom:function(t,e){t.allBathrooms=[].concat(Object(ee["a"])(t.allBathrooms),[e])},addComment:function(t,e){e.user=t.user,t.selectedBathroom.comments=[].concat(Object(ee["a"])(t.selectedBathroom.comments),[e])},setSelectedLocation:function(t,e){t.selectedLocation=e}},actions:{setUser:function(t,e){var a=t.commit;a("setUser",e)},logout:function(t){var e=t.commit;e("logout")},setAllBathrooms:function(t,e){var a=t.commit;a("setAllBathrooms",e)},setBathroom:function(t,e){var a=t.commit;a("setBathroom",e)},setCurrentLocation:function(t,e){var a=t.commit;a("setCurrentLocation",e)},addBathroom:function(t,e){var a=t.commit;a("addBathroom",e)},addComment:function(t,e){var a=t.commit;a("addComment",e)},setSelectedLocation:function(t,e){var a=t.commit;a("setSelectedLocation",e)}}}),oe=(a("cf48"),a("e6ce"));o["default"].use(oe["a"],{breakpoints:{mobile:450,tablet:900,desktop:1/0}}),o["default"].config.productionTip=!1,o["default"].use(n["a"]),Object(te["sync"])(re,Qt),new o["default"]({render:function(t){return t(j)},router:Qt,store:re}).$mount("#app")},"9d65":function(t,e,a){},a8c6:function(t,e,a){},aa01:function(t,e,a){},b092:function(t,e,a){"use strict";var r=a("c376"),o=a.n(r);o.a},b84f:function(t,e,a){},c376:function(t,e,a){},cc3f:function(t,e,a){"use strict";var r=a("1da0"),o=a.n(r);o.a},d04a:function(t,e,a){}});
//# sourceMappingURL=app.cf653050.js.map